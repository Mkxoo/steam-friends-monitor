如何使用

# 打开工作页面
在安装好扩展之后，浏览器的扩展图标里应该能看见我们的图标。点开就是打开我们的工作页面。    
![LOGO](https://raw.githubusercontent.com/gordonwalkedby/steam-friends-monitor/master/icons/main.png)   

# 保持浏览器里一直登录steam
如果你不登录 steam，每次打开浏览器，扩展都会推送一条消息，问你steam为什么不登录。   
同时如果你中途steam登录掉了，扩展也会推送消息，指出steam登录失败。   
当你登录成功了，工作页面的上面会显示你目前登录的账号。   
每个steam账号的配置信息都是分开存储的，包括你的好友列表，github设置等。   
只有在登录到一个steam账号的时候，扩展才会做关于这个steam账号的事情。
![](https://s3.ax1x.com/2021/02/01/yZHDU0.png)   

# 自动检测好友列表
每次您打开浏览器，扩展都会扫描一次登录着的steam账号的好友列表。  
如果你的登录掉了，尽管你的steam好友列表可能是公开的，但是我依然无法获取。  
我内部采用的是这个页面：　https://steamcommunity.com/my/friends/    
如果有好友失去或者好友新增，扩展会发出推送提示你。   
这里有一个设计上的特性（BUG），就是假如你原来一个好友都没有，新增好友之后的第一次检测是不会有任何提醒的。只会在你丢失这个好友或者新增其他好友的时候才会开始工作。   
同理，如果你原来有好友，把他们全部删了，好友数量为0，我会觉得应该是网络故障，从而拒绝提醒。  
开启浏览器后，如果一直不关闭，是每个小时检测一次您的steam好友列表。  
您也可以手动在工作页面里立刻检测好友列表变化。   
好友列表变化的数据会显示在工作页面里面，绿色的表示新增好友，红色的表示丢失好友。  

# 导出聊天记录到本地
聊天记录的来源依赖的是 [steam 官方的数据页面](https://help.steampowered.com/zh-cn/accountdata/GetFriendMessagesLog)。    
官网是需要自己一页一页点击的，最多只保留14天的记录，且不包含任何群组聊天。我可以在后台“替你点击”，然后整理成文档。  
导出到本地是每一次都需要您自己手动操作的。到我们的工作页面里，点击【开始导出】。  
然后需要等一段时间，途中不要关闭浏览器，但可以关闭工作页面。工作完成后，你会收到一条推送。  
目前提供三种格式的导出，如果你是普通的日用浏览与备份，非编程相关用途。建议使用CSV的普通人推荐模式。使用Excel表格软件即可打开。    
下面这张图片展示了普通人推荐模式和无BOM两种模式下对Excel表格软件影响的区别。    
![](https://s3.ax1x.com/2021/02/01/yePu7T.png)   
你可以在工作页面里按【开启定期备份提醒】，开启之后，如果你6天没有导出过聊天记录，浏览器就会推送和提醒你。  

# 自动同步聊天记录到github云端
你可以绑定你的github信息，然后让扩展每天自动上传你的聊天记录到你的github私有仓库里。   
其实你的公开仓库也可以，只是你会希望别人透视你的聊天记录嘛？   
你需要自己新建一个私有仓库。如果你用以前的仓库的话，我会在仓库主分支的根目录创建年份文件夹。     
点击【设置github云端存储】，你需要输入你的github用户名，你的github token，以及你要使用的私有仓库的名字。  
## 用户名指的是这个用户名：  
![](https://s3.ax1x.com/2021/02/01/yekPAK.png)   
## 新建一个 token 
token 指的是一个专用密码，指的是拥有这个 token 的人或者程序就相当于你在本人操作。每个token都可以限制他的能力范围。   
github token 需要你到github的这个页面 https://github.com/settings/tokens  ，然后点击【Generate New Token】。  
起一个备注名，随便起个啥，你别到时候忘了是什么意思就行。然后权限要勾选 repo 的全部权限。  
![](https://s3.ax1x.com/2021/02/01/yekgD1.png)     
最后按下页面下面的【Generate Token】，接下来可能会让你输入 github 密码做安全检查。  
之后你会看见你的 token 明文。  
请复制出来，然后填入我们的工作页面的询问框里。  
你不需要保存这个token（泄露会很危险！），有需要的情况下，可以随时去申请一个新的 token ，老的 token 会立刻作废。  
在工作页面填写好github信息之后，会自动做一次检测。如果检测成功，浏览器会推送一条消息，显示你这个私有仓库的分支数量。  
自动同步到github是一天一次的，在仓库里你可以看见`2021/01/25.csv`这样的文件结构。这个路径表示了里面的聊天记录都是2021年1月25日那一天的。只不过要注意，这里使用的分割的时区是UTC世界标准时间。这是为了防止你开了我这个扩展然后出国了或者换了一个时区导致数据错乱。文件里面的时间文本的时区还是你上传时候的时区。所以你可能看见前一天的聊天记录或者后一天的聊天记录。github 是支持在线预览csv的，所以你直接点开就能看见表格了。    
![](https://s3.ax1x.com/2021/02/01/yeEAOA.png)   
